<div class="categorias-container">
  <!-- Contenido principal MEJORADO -->
  <main class="categorias-main">
    <div class="categorias-content">
      
      <!-- Hero Section Mejorada -->
      <section class="categorias-hero">
        <div class="hero-content">
          <div class="hero-text">
            <h1 class="hero-title">
              <span class="hero-accent">Descubre</span> el Alma de MÃ©xico
            </h1>
            <p class="hero-subtitle">
              Explora nuestras categorÃ­as artesanales y conecta con tradiciones centenarias
            </p>
            <div class="hero-stats">
              <div class="hero-stat">
                <span class="stat-number">{{ categorias.length }}+</span>
                <span class="stat-label">TÃ©cnicas</span>
              </div>
              <div class="hero-stat">
                <span class="stat-number">{{ obtenerTotalArtesanos() }}+</span>
                <span class="stat-label">Artesanos</span>
              </div>
              <div class="hero-stat">
                <span class="stat-number">{{ obtenerTotalProductos() }}+</span>
                <span class="stat-label">Productos</span>
              </div>
            </div>
          </div>
          <div class="hero-visual">
            <div class="floating-elements">
              <div class="floating-item item-1">ğŸ¨</div>
              <div class="floating-item item-2">ğŸ§µ</div>
              <div class="floating-item item-3">ğŸº</div>
              <div class="floating-item item-4">âœ¨</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Filtros Mejorados con PestaÃ±as -->
      <section class="filtros-mejorados">
        <div class="filtros-container">
          <!-- PestaÃ±as de Filtro RÃ¡pidas -->
          <div class="filtro-tabs">
            <button class="tab-filtro" 
                    [class.active]="filtroRapido === 'todos'"
                    (click)="aplicarFiltroRapido('todos')">
              ğŸ¯ Todos
            </button>
            <button class="tab-filtro" 
                    [class.active]="filtroRapido === 'populares'"
                    (click)="aplicarFiltroRapido('populares')">
              ğŸ”¥ Populares
            </button>
            <button class="tab-filtro" 
                    [class.active]="filtroRapido === 'nuevos'"
                    (click)="aplicarFiltroRapido('nuevos')">
              ğŸ†• Nuevos
            </button>
          </div>

          <!-- Barra de BÃºsqueda y Filtros Avanzados -->
          <div class="filtros-avanzados">
            <div class="search-box">
              <div class="search-icon">ğŸ”</div>
              <input 
                type="text" 
                placeholder="Buscar categorÃ­as, tÃ©cnicas, regiones..." 
                [(ngModel)]="terminoBusqueda"
                (input)="filtrarCategorias()"
                class="search-input-avanzado"
              >
              <div class="search-actions">
                @if (terminoBusqueda) {
                  <button class="btn-clear" (click)="limpiarBusqueda()">
                    âœ•
                  </button>
                }
              </div>
            </div>

            <div class="filtros-group">
              <div class="filtro-dropdown">
                <label>ğŸ“ RegiÃ³n</label>
                <select [(ngModel)]="filtroRegion" (change)="filtrarCategorias()" class="dropdown-select">
                  <option value="">Todas las regiones</option>
                  @for (region of regiones; track region) {
                    <option [value]="region">{{ region }}</option>
                  }
                </select>
              </div>

              <div class="filtro-dropdown">
                <label>ğŸ“Š Ordenar por</label>
                <select [(ngModel)]="ordenSeleccionado" (change)="ordenarCategorias()" class="dropdown-select">
                  <option value="nombre">Nombre A-Z</option>
                  <option value="popularidad">MÃ¡s populares</option>
                  <option value="productos">MÃ¡s productos</option>
                  <option value="nuevos">MÃ¡s recientes</option>
                </select>
              </div>

              <button class="btn-filtros-toggle" (click)="toggleFiltrosAvanzados()">
                ğŸšï¸ {{ mostrarFiltrosAvanzados ? 'Menos' : 'MÃ¡s' }} Filtros
              </button>
            </div>

            <!-- Filtros Avanzados Desplegables -->
            @if (mostrarFiltrosAvanzados) {
              <div class="filtros-avanzados-content">
                <div class="filtros-avanzados-grid">
                  <div class="filtro-avanzado">
                    <label>â­ Rating MÃ­nimo</label>
                    <div class="rating-filtro">
                      @for (star of [4, 3, 2, 1]; track star) {
                        <button class="btn-rating"
                                [class.active]="filtroRating === star"
                                (click)="filtroRating = filtroRating === star ? 0 : star">
                          {{ star }}+ â­
                        </button>
                      }
                    </div>
                  </div>

                  <div class="filtro-avanzado">
                    <label>ğŸ‘¨â€ğŸ¨ Artesanos</label>
                    <select [(ngModel)]="filtroArtesanos" (change)="filtrarCategorias()" class="dropdown-select">
                      <option value="">Cualquier cantidad</option>
                      <option value="5">5+ artesanos</option>
                      <option value="10">10+ artesanos</option>
                      <option value="15">15+ artesanos</option>
                    </select>
                  </div>
                </div>
              </div>
            }
          </div>
        </div>
      </section>

      <!-- Grid de CategorÃ­as Mejorado -->
      <section class="categorias-grid-mejorado">
        <!-- Indicador de Resultados -->
        <div class="resultados-info">
          <h2 class="resultados-title">
            {{ categoriasFiltradas.length }} CategorÃ­as
            @if (filtroActivo) {
              <span class="resultados-filtro">
                Â· Filtradas
              </span>
            }
          </h2>
          @if (filtroActivo) {
            <button class="btn-reset-filtros"
                    (click)="limpiarFiltros()">
              ğŸ—‘ï¸ Limpiar Filtros
            </button>
          }
        </div>

        <!-- Grid Mejorado -->
        <div class="grid-categorias">
          @for (categoria of categoriasFiltradas; track categoria.id; let i = $index) {
            <div class="categoria-card-mejorada"
                 [class.featured]="categoria.popular"
                 (click)="verCategoria(categoria)">
              
              <!-- Badge de Estado -->
              <div class="categoria-badges">
                @if (categoria.popular) {
                  <span class="badge badge-popular">ğŸ”¥ Popular</span>
                }
                @if (esCategoriaNueva(categoria)) {
                  <span class="badge badge-nuevo">ğŸ†• Nueva</span>
                }
                <span class="badge badge-region">{{ categoria.region }}</span>
              </div>

            <!-- Imagen con Efecto -->
            <div class="categoria-imagen-mejorada">
              <img [src]="categoria.imagen" [alt]="categoria.nombre">
              <div class="categoria-overlay-mejorada">
                <div class="overlay-content">
                  <span class="overlay-icon">ğŸ‘ï¸</span>
                  <span class="overlay-text">Explorar</span>
                </div>
              </div>
              <div class="categoria-gradient"></div>
            </div>

            <!-- Contenido de la Card -->
            <div class="categoria-content">
              <div class="categoria-header">
                <h3 class="categoria-title">{{ categoria.nombre }}</h3>
                <div class="categoria-rating">
                  <span class="rating-stars">â­</span>
                  <span class="rating-value">{{ categoria.rating }}</span>
                </div>
              </div>

              <p class="categoria-descripcion">{{ categoria.descripcionCorta }}</p>

              <!-- Stats Mejorados -->
              <div class="categoria-stats-mejorados">
                <div class="stat-item">
                  <div class="stat-icon">ğŸ“¦</div>
                  <div class="stat-info">
                    <span class="stat-number">{{ categoria.totalProductos }}</span>
                    <span class="stat-label">Productos</span>
                  </div>
                </div>
                <div class="stat-item">
                  <div class="stat-icon">ğŸ‘¨â€ğŸ¨</div>
                  <div class="stat-info">
                    <span class="stat-number">{{ categoria.artesanos }}</span>
                    <span class="stat-label">Artesanos</span>
                  </div>
                </div>
              </div>

              <!-- Tags Mejorados -->
              <div class="categoria-tags-mejorados">
                @for (tag of categoria.tags; track tag) {
                  <span class="tag-mejorado"
                        [style.background]="getTagColor(tag)">
                    {{ tag }}
                  </span>
                }
              </div>

              <!-- Action Button -->
              <button class="btn-explorar-categoria">
                <span>Explorar ColecciÃ³n</span>
                <span class="btn-arrow">â†’</span>
              </button>
            </div>
          </div>
          }
        </div>

        <!-- PaginaciÃ³n o Carga -->
        @if (categoriasFiltradas.length === 0) {
          <div class="sin-resultados-mejorado">
            <div class="sin-resultados-content">
              <div class="sin-resultados-icon">ğŸ¨</div>
              <h3>No encontramos categorÃ­as</h3>
              <p>Prueba ajustando los filtros o <a (click)="limpiarFiltros()" class="link-reset">ver todas las categorÃ­as</a></p>
            </div>
          </div>
        }

        <!-- BotÃ³n Cargar MÃ¡s -->
        @if (categoriasFiltradas.length > 0) {
          <div class="cargar-mas-section">
            <button class="btn-cargar-mas" (click)="cargarMasCategorias()">
              <span>Cargar MÃ¡s CategorÃ­as</span>
              @if (cargando) {
                <span class="loading-dots">...</span>
              }
            </button>
          </div>
        }
      </section>

      <!-- SecciÃ³n de InspiraciÃ³n -->
      <section class="inspiracion-section">
        <div class="inspiracion-content">
          <div class="inspiracion-text">
            <h2>Â¿No encuentras lo que buscas?</h2>
            <p>Nuestros artesanos estÃ¡n constantemente creando nuevas piezas. ContÃ¡ctanos para pedidos especiales.</p>
            <button class="btn-inspiracion" routerLink="/ayuda">
              ğŸ’¬ Solicitar ArtesanÃ­a Personalizada
            </button>
          </div>
          <div class="inspiracion-visual">
            <div class="inspiracion-item">âœ¨</div>
          </div>
        </div>
      </section>
    </div>
  </main>
</div>