<div class="categorias-container">
  <!-- HERO SECTION -->
  <section class="categorias-hero">
    <div class="mexican-pattern"></div>
    
    <div class="hero-content-wrapper">
      <div class="hero-content">
        <div class="hero-text">
          <h1 class="hero-title">
            <span class="hero-line-1">Tradiciones</span>
            <span class="hero-line-2">
              <span class="text-mexicanas">Mexicanas</span>
              <span class="text-categorias">Categorías</span>
            </span>
          </h1>
          
          <p class="hero-subtitle">
            Explora nuestras categorías artesanales y conecta con tradiciones centenarias
          </p>
          
          <div class="hero-stats">
            <div class="hero-stat">
              <span class="stat-number">{{ categorias.length }}</span>
              <span class="stat-label">Categorías</span>
            </div>
            <div class="hero-stat">
              <span class="stat-number">{{ obtenerTotalArtesanos() }}+</span>
              <span class="stat-label">Artesanos</span>
            </div>
            <div class="hero-stat">
              <span class="stat-number">{{ obtenerTotalProductos() }}+</span>
              <span class="stat-label">Productos</span>
            </div>
          </div>
          
          <div class="hero-cta">
            <button class="btn-explorar btn-glow-effect" (click)="scrollToCategorias()">
              <i class="material-icons btn-icon">search</i>
              <span class="btn-text">Explorar Categorías</span>
            </button>
          </div>
        </div>
        
        <div class="hero-decoration">
          <div class="decoration-item">
            <i class="material-icons icon-xl">auto_awesome</i>
          </div>
          <div class="decoration-item">
            <i class="material-icons icon-xl">palette</i>
          </div>
          <div class="decoration-item">
            <i class="material-icons icon-xl">brush</i>
          </div>
        </div>
      </div>
    </div>
    
    <div class="scroll-indicator" (click)="scrollToCategorias()">
      <div class="arrow"></div>
    </div>
  </section>

  <!-- FILTROS -->
  <section class="filtros-section">
    <div class="container">
      <div class="filtros-grid">
        <div class="filtro-card" 
            [class.active]="filtroRapido === 'todos'"
            (click)="aplicarFiltroRapido('todos')">
          <div class="filtro-icon">
            <i class="material-icons">category</i>
          </div>
          <div class="filtro-content">
            <h4>Todas</h4>
            <p>Todas las categorías</p>
          </div>
        </div>
        
        <div class="filtro-card"
            [class.active]="filtroRapido === 'populares'"
            (click)="aplicarFiltroRapido('populares')">
          <div class="filtro-icon">
            <i class="material-icons icon-mexican-red">whatshot</i>
          </div>
          <div class="filtro-content">
            <h4>Populares</h4>
            <p>Lo más buscado</p>
          </div>
        </div>
        
        <div class="filtro-card"
            [class.active]="filtroRapido === 'nuevos'"
            (click)="aplicarFiltroRapido('nuevos')">
          <div class="filtro-icon">
            <i class="material-icons icon-mexican-green">fiber_new</i>
          </div>
          <div class="filtro-content">
            <h4>Nuevos</h4>
            <p>Últimas categorías</p>
          </div>
        </div>
        
        <div class="filtro-card dropdown-filtro">
          <div class="filtro-icon">
            <i class="material-icons">location_on</i>
          </div>
          <div class="filtro-content">
            <select [(ngModel)]="filtroRegion" (change)="filtrarCategorias()" class="region-select">
              <option value="">Todas las regiones</option>
              <option *ngFor="let region of regiones" [value]="region">{{ region }}</option>
            </select>
          </div>
        </div>
      </div>
      
      <div class="filtros-footer">
        <div class="ordenamiento">
          <label>Ordenar por:</label>
          <select [(ngModel)]="ordenSeleccionado" (change)="ordenarCategorias()" class="orden-select">
            <option value="nombre">Nombre A-Z</option>
            <option value="popularidad">Más populares</option>
            <option value="productos">Más productos</option>
            <option value="nuevos">Más recientes</option>
          </select>
        </div>
        
        <button class="btn-filtros-avanzados btn-glow-subtle" (click)="mostrarFiltrosAvanzados = !mostrarFiltrosAvanzados">
          {{ mostrarFiltrosAvanzados ? 'Menos filtros' : 'Más filtros' }}
        </button>
        
        <button class="btn-limpiar btn-glow-effect btn-glow-subtle" (click)="limpiarFiltros()" *ngIf="filtroActivo">
          <i class="material-icons btn-icon">refresh</i>
          Limpiar filtros
        </button>
      </div>
      
      <div class="filtros-avanzados" *ngIf="mostrarFiltrosAvanzados">
        <div class="filtro-avanzado">
          <label>⭐ Rating mínimo</label>
          <div class="rating-options">
            <button *ngFor="let rating of [4, 3, 2, 1]"
                    class="rating-btn"
                    [class.active]="filtroRating === rating"
                    (click)="filtroRating = filtroRating === rating ? 0 : rating; filtrarCategorias()">
              {{ rating }}+ 
              <i class="material-icons icon-mexican-gold">star</i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- GRID DE CATEGORÍAS -->
  <section class="categorias-section" id="categorias" #categoriasSection>
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Nuestras Categorías</h2>
        <div class="resultados-count">
          <span class="count-number">{{ categoriasFiltradas.length }}</span>
          <span class="count-text">
            {{ categoriasFiltradas.length === 1 ? 'categoría' : 'categorías' }}
          </span>
        </div>
      </div>
      
      <div class="loading-state" *ngIf="cargando">
        <div class="spinner"></div>
        <p>Cargando categorías...</p>
      </div>
      
      <div class="categorias-grid" *ngIf="!cargando">
        <div class="categoria-card" *ngFor="let categoria of categoriasFiltradas">
          <div class="categoria-imagen">
            <img 
              [src]="categoria.imagen" 
              [alt]="categoria.nombre"
              (error)="onImgError($event, categoria)"
              loading="lazy"
            />
            
            <div class="categoria-badges">
              <span class="badge badge-region">{{ categoria.region }}</span>
              <span class="badge badge-popular" *ngIf="categoria.popular">
                <i class="material-icons icon-mexican-red">whatshot</i>
              </span>
              <span class="badge badge-nuevo" *ngIf="esCategoriaNueva(categoria)">
                <i class="material-icons icon-mexican-green">fiber_new</i>
              </span>
            </div>
          </div>
          
          <div class="categoria-content">
            <h3 class="categoria-nombre">{{ categoria.nombre }}</h3>
            <p class="categoria-descripcion">{{ categoria.descripcionCorta }}</p>
            
            <div class="categoria-stats">
              <div class="stat">
                <i class="material-icons icon-mexican-brown">inventory_2</i>
                <span class="stat-value">{{ categoria.totalProductos }}</span>
                <span class="stat-label">Productos</span>
              </div>
              <div class="stat">
                <i class="material-icons icon-mexican-gold">person</i>
                <span class="stat-value">{{ categoria.artesanos }}</span>
                <span class="stat-label">Artesanos</span>
              </div>
              <div class="stat">
                <i class="material-icons icon-mexican-gold">star</i>
                <span class="stat-value">{{ categoria.rating }}</span>
                <span class="stat-label">Rating</span>
              </div>
            </div>
            
            <div class="categoria-tags">
              <span *ngFor="let tag of categoria.tags" class="tag">
                {{ tag }}
              </span>
            </div>
            
            <button class="btn-explorar-categoria btn-glow-effect" (click)="verCategoria(categoria)">
              <span>Explorar Categoría</span>
              <i class="material-icons">arrow_forward</i>
            </button>
          </div>
        </div>
      </div>
      
      <div class="no-resultados" *ngIf="!cargando && categoriasFiltradas.length === 0">
        <div class="no-resultados-icon">
          <i class="material-icons icon-lg">search_off</i>
        </div>
        <h3>No encontramos categorías</h3>
        <p>Prueba con otros filtros</p>
        <button class="btn-limpiar btn-glow-effect btn-glow-subtle" (click)="limpiarFiltros()">
          <i class="material-icons btn-icon">refresh</i>
          Ver todas las categorías
        </button>
      </div>
    </div>
  </section>

  <!-- INFO SECTION -->
  <section class="info-section">
    <div class="container">
      <h2 class="info-title">Explora la Artesanía Mexicana</h2>
      <div class="info-grid">
        <div class="info-card">
          <div class="info-icon">
            <i class="material-icons icon-mexican-brown icon-xl">person_apron</i>
          </div>
          <h3>Artesanos Expertos</h3>
          <p>Trabajamos con maestros artesanos certificados</p>
        </div>
        <div class="info-card">
          <div class="info-icon">
            <i class="material-icons icon-mexican-gold icon-xl">verified</i>
          </div>
          <h3>Calidad Garantizada</h3>
          <p>Cada pieza es única y auténtica</p>
        </div>
        <div class="info-card">
          <div class="info-icon">
            <i class="material-icons icon-mexican-green icon-xl">local_shipping</i>
          </div>
          <h3>Envío Nacional</h3>
          <p>Llevamos la artesanía a todo México</p>
        </div>
      </div>
    </div>
  </section>
</div>