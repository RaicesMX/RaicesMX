<div class="perfil-container">
<!-- Contenido principal del perfil como Dashboard -->
<main class="perfil-main">
    <div class="perfil-content">  
<!-- Banner de bienvenida -->
<section class="bienvenida-section">
    <div class="bienvenida-content">
        <h1>¬°Hola, {{ usuario.nombre.split(' ')[0] }}! üëã</h1>
        <p>Gestiona tu cuenta y preferencias desde aqu√≠</p>
    </div>
        <div class="estadisticas-rapidas">
            <div class="estadistica">
                <span class="numero">5</span>
                <span class="label">Pedidos</span>
            </div>
        <div class="estadistica">
            <span class="numero">12</span>
            <span class="label">Favoritos</span>
        </div>
        <div class="estadistica">
            <span class="numero">2</span>
            <span class="label">Direcciones</span>
        </div>
    </div>
</section>

<!-- Panel de control con pesta√±as -->
<div class="dashboard-panel">
<!-- Navegaci√≥n por pesta√±as -->
    <nav class="tab-navigation">
        <button class="tab-btn" 
                [class.active]="tabActiva === 'informacion'" 
                (click)="cambiarTab('informacion')">
                    üìã Informaci√≥n Personal
        </button>
        <button class="tab-btn" 
                [class.active]="tabActiva === 'direcciones'" 
                (click)="cambiarTab('direcciones')">
                üìç Direcciones
        </button>
        <button class="tab-btn" 
                [class.active]="tabActiva === 'privacidad'" 
                (click)="cambiarTab('privacidad')">
                üîí Privacidad y Seguridad
        </button>
    </nav>
<!-- Contenido de las pesta√±as -->
        <div class="tab-content">
<!-- Pesta√±a: Informaci√≥n Personal -->
          <div *ngIf="tabActiva === 'informacion'" class="tab-pane">
            <div class="pane-header">
                <h2>Informaci√≥n Personal</h2>
                <button class="btn-editar" (click)="toggleEdicion()">
                    {{ editando ? 'Cancelar' : 'Editar Informaci√≥n' }}
                </button>
            </div>

<div class="formulario-perfil">
    <div class="form-row">
        <div class="form-group">
            <label>Nombre completo *</label>
            <div *ngIf="!editando" class="info-value">{{ usuario.nombre }}</div>
            <input *ngIf="editando" type="text" [(ngModel)]="usuarioEditado.nombre" class="form-input">
        </div>
        <div class="form-group">
            <label>CURP *</label>
            <div *ngIf="!editando" class="info-value">{{ usuario.curp }}</div>
                <input *ngIf="editando" type="text" [(ngModel)]="usuarioEditado.curp" class="form-input" 
                placeholder="ABCD123456HEMLMN09" maxlength="18">
        </div>
        </div>

<div class="form-row">
    <div class="form-group">
        <label>Correo electr√≥nico *</label>
            <div *ngIf="!editando" class="info-value">{{ usuario.email }}</div>
                <input *ngIf="editando" type="email" [(ngModel)]="usuarioEditado.email" class="form-input">
    </div>
    <div class="form-group">
        <label>Tel√©fono *</label>
            <div *ngIf="!editando" class="info-value">{{ usuario.telefono }}</div>
                <input *ngIf="editando" type="tel" [(ngModel)]="usuarioEditado.telefono" class="form-input">
    </div>
</div>

<div class="form-group">
    <label>Fecha de nacimiento</label>
        <div *ngIf="!editando" class="info-value">{{ usuario.fechaNacimiento | date:'longDate' }}</div>
    <input *ngIf="editando" type="date" [(ngModel)]="usuarioEditado.fechaNacimiento" class="form-input">
</div>

<!-- Bot√≥n guardar en modo edici√≥n -->
<div *ngIf="editando" class="acciones-formulario">
            <button class="btn-guardar" (click)="guardarCambios()">Guardar Cambios</button>
            <button class="btn-cancelar" (click)="toggleEdicion()">Cancelar</button>
        </div>
    </div>
</div>

<!-- Pesta√±a: Direcciones -->
    <div *ngIf="tabActiva === 'direcciones'" class="tab-pane">
        <div class="pane-header">
            <h2>Mis Direcciones</h2>
            <button class="btn-primary" (click)="agregarDireccion()">
            Ôºã Agregar Direcci√≥n
        </button>
    </div>

<div class="direcciones-list">
    <div *ngFor="let direccion of direcciones; let i = index" class="direccion-card">
        <div class="direccion-header">
            <h3>{{ direccion.nombre }}</h3>
                <span *ngIf="direccion.principal" class="badge-principal">Principal</span>
            </div>
                
            <div class="direccion-info">
                <p><strong>Direcci√≥n:</strong> {{ direccion.calle }}, {{ direccion.colonia }}</p>
                <p><strong>Ciudad:</strong> {{ direccion.ciudad }}, {{ direccion.estado }}</p>
                <p><strong>C.P.:</strong> {{ direccion.codigoPostal }}</p>
                <p><strong>Entre calles:</strong> {{ direccion.entreCalles }}</p>
                <p><strong>Instrucciones:</strong> {{ direccion.instrucciones }}</p>
            </div>

            <div class="direccion-acciones">
                <button class="btn-secundario" (click)="editarDireccion(i)">Editar</button>
                    <button *ngIf="!direccion.principal" class="btn-secundario" (click)="establecerPrincipal(i)">
                        Establecer como principal
                    </button>
                <button class="btn-eliminar" (click)="eliminarDireccion(i)">Eliminar</button>
                </div>
            </div>

              <div *ngIf="direcciones.length === 0" class="sin-direcciones">
                <p>No tienes direcciones guardadas</p>
                <button class="btn-primary" (click)="agregarDireccion()">Agregar primera direcci√≥n</button>
            </div>
        </div>
    </div>
<!-- Pesta√±a: Privacidad y Seguridad -->
          <div *ngIf="tabActiva === 'privacidad'" class="tab-pane">
            <div class="pane-header">
                <h2>Privacidad y Seguridad</h2>
            </div>

            <div class="configuraciones-list">
                <div class="configuracion-item">
                <div class="config-info">
                    <h3>Cambiar Contrase√±a</h3>
                    <p>Actualiza tu contrase√±a regularmente para mantener tu cuenta segura</p>
                </div>
                <button class="btn-primary" (click)="cambiarContrasena()">Cambiar</button>
            </div>

            <div class="configuracion-item">
                <div class="config-info">
                    <h3>Verificaci√≥n en dos pasos</h3>
                    <p>A√±ade una capa extra de seguridad a tu cuenta</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" [(ngModel)]="verificacionDosPasos">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="configuracion-item">
                <div class="config-info">
                    <h3>Notificaciones por email</h3>
                    <p>Recibe notificaciones sobre tus pedidos y ofertas especiales</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" [(ngModel)]="notificacionesEmail" checked>
                    <span class="slider"></span>
                </label>
            </div>

            <div class="configuracion-item">
                <div class="config-info">
                    <h3>Eliminar cuenta</h3>
                    <p>Elimina permanentemente tu cuenta y todos tus datos</p>
                </div>
                <button class="btn-eliminar-cuenta" (click)="eliminarCuenta()">Eliminar Cuenta</button>
                </div>
            </div>
        </div>

        </div>
    </div>

    </div>
    </main>
</div>