<div class="ofertas-container">
  <!-- Contenido principal -->
  <main class="ofertas-main">
    <div class="ofertas-content">
      
      <!-- Hero Section -->
      <section class="ofertas-hero">
        <div class="hero-content">
          <div class="hero-text">
            <h1 class="hero-title">
              <span class="hero-accent">Ofertas Especiales</span> ğŸ·ï¸
            </h1>
            <p class="hero-subtitle">
              Descubre descuentos exclusivos en artesanÃ­as mexicanas. Â¡Tiempo limitado!
            </p>
            <div class="hero-stats">
              <div class="hero-stat">
                <span class="stat-number">{{ ofertas.length }}</span>
                <span class="stat-label">Ofertas Activas</span>
              </div>
              <div class="hero-stat">
                <span class="stat-number">{{ calcularAhorroTotal() | currency }}</span>
                <span class="stat-label">Ahorro Total</span>
              </div>
              <div class="hero-stat">
                <span class="stat-number">{{ obtenerTiempoRestante() }}</span>
                <span class="stat-label">Tiempo Restante</span>
              </div>
            </div>
          </div>
          <div class="hero-visual">
            <div class="floating-elements">
              <div class="floating-item item-1">ğŸ”¥</div>
              <div class="floating-item item-2">ğŸ’°</div>
              <div class="floating-item item-3">âš¡</div>
              <div class="floating-item item-4">ğŸ¯</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Banner de Oferta Destacada -->
      <section *ngIf="ofertaDestacada" class="oferta-destacada">
        <div class="destacada-content">
          <div class="destacada-info">
            <div class="destacada-badge">OFERTA DESTACADA</div>
            <h2 class="destacada-title">{{ ofertaDestacada.nombre }}</h2>
            <p class="destacada-desc">{{ ofertaDestacada.descripcion }}</p>
            <div class="destacada-precio">
              <span class="precio-oferta">{{ calcularPrecioOferta(ofertaDestacada) | currency }}</span>
              <span class="precio-original">{{ ofertaDestacada.precio | currency }}</span>
              <span class="descuento-badge">-{{ ofertaDestacada.descuento }}%</span>
            </div>
            <div class="destacada-timer">
              <div class="timer-label">Termina en:</div>
              <div class="timer-display">
                <span class="timer-item">
                  <span class="timer-number">{{ ofertaDestacada.tiempoRestante?.dias || 0 }}</span>
                  <span class="timer-label">DÃ­as</span>
                </span>
                <span class="timer-separator">:</span>
                <span class="timer-item">
                  <span class="timer-number">{{ ofertaDestacada.tiempoRestante?.horas || 0 }}</span>
                  <span class="timer-label">Horas</span>
                </span>
                <span class="timer-separator">:</span>
                <span class="timer-item">
                  <span class="timer-number">{{ ofertaDestacada.tiempoRestante?.minutos || 0 }}</span>
                  <span class="timer-label">Min</span>
                </span>
              </div>
            </div>
            <div class="destacada-actions">
              <button class="btn-comprar-ahora" (click)="comprarAhora(ofertaDestacada)">
                âš¡ Comprar Ahora
              </button>
              <button class="btn-ver-detalles" (click)="verDetalles(ofertaDestacada)">
                ğŸ‘ï¸ Ver Detalles
              </button>
            </div>
          </div>
          <div class="destacada-imagen">
            <img [src]="ofertaDestacada.imagen" [alt]="ofertaDestacada.nombre">
          </div>
        </div>
      </section>

      <!-- Filtros y Ordenamiento -->
      <section class="filtros-ofertas">
        <div class="filtros-container">
          <div class="filtros-left">
            <h2 class="filtros-title">
              {{ ofertasFiltradas.length }} Ofertas Disponibles
            </h2>
          </div>
          
          <div class="filtros-right">
            <div class="filtro-group">
              <select [(ngModel)]="filtroCategoria" (change)="filtrarOfertas()" class="filtro-select">
                <option value="">Todas las categorÃ­as</option>
                <option *ngFor="let cat of categoriasUnicas" [value]="cat">{{ cat }}</option>
              </select>
            </div>

            <div class="filtro-group">
              <select [(ngModel)]="ordenSeleccionado" (change)="ordenarOfertas()" class="filtro-select">
                <option value="descuento">Mayor Descuento</option>
                <option value="precio">Menor Precio</option>
                <option value="nuevo">MÃ¡s Recientes</option>
                <option value="popular">MÃ¡s Populares</option>
                <option value="tiempo">Poco Tiempo</option>
              </select>
            </div>

            <div class="filtro-group">
              <select [(ngModel)]="filtroDescuento" (change)="filtrarOfertas()" class="filtro-select">
                <option value="">Cualquier descuento</option>
                <option value="10">10%+ descuento</option>
                <option value="20">20%+ descuento</option>
                <option value="30">30%+ descuento</option>
                <option value="50">50%+ descuento</option>
              </select>
            </div>
          </div>
        </div>
      </section>

      <!-- Grid de Ofertas -->
      <section class="ofertas-grid">
        <div class="grid-ofertas">
          <div *ngFor="let oferta of ofertasFiltradas; let i = index" 
               class="oferta-card"
               [class.destacada]="oferta.destacada"
               [class.ultimas-unidades]="oferta.stock <= 5 && oferta.stock > 0"
               [class.agotado]="oferta.stock === 0">
            
            <!-- Badges -->
            <div class="oferta-badges">
              <span class="badge badge-descuento">-{{ oferta.descuento }}%</span>
              <span *ngIf="oferta.destacada" class="badge badge-destacada">ğŸ”¥ Destacada</span>
              <span *ngIf="oferta.stock <= 5 && oferta.stock > 0" class="badge badge-stock">â³ Ãšltimas {{ oferta.stock }}</span>
              <span *ngIf="oferta.stock === 0" class="badge badge-agotado">ğŸ˜” Agotado</span>
              <span *ngIf="oferta.exclusivo" class="badge badge-exclusivo">â­ Exclusivo</span>
            </div>

            <!-- Timer de oferta -->
            <div class="oferta-timer">
              <div class="timer-progress">
                <div class="progress-bar" [style.width]="calcularProgresoTiempo(oferta) + '%'"></div>
              </div>
              <div class="timer-text">
                â° {{ oferta.tiempoRestante?.dias }}d {{ oferta.tiempoRestante?.horas }}h
              </div>
            </div>

            <!-- Imagen -->
            <div class="oferta-imagen">
              <img [src]="oferta.imagen" [alt]="oferta.nombre">
              <div class="oferta-overlay">
                <div class="overlay-actions">
                  <button class="btn-action btn-ver" (click)="verDetalles(oferta)">
                    ğŸ‘ï¸ Ver
                  </button>
                  <button class="btn-action btn-favorito" (click)="toggleFavorito(oferta)">
                    {{ oferta.enFavoritos ? 'â¤ï¸' : 'ğŸ¤' }}
                  </button>
                  <button class="btn-action btn-carrito" 
                          (click)="agregarAlCarrito(oferta)"
                          [disabled]="oferta.stock === 0">
                    ğŸ›’ {{ oferta.stock === 0 ? 'Agotado' : 'Carrito' }}
                  </button>
                </div>
              </div>
            </div>

            <!-- InformaciÃ³n -->
            <div class="oferta-info">
              <div class="oferta-header">
                <h3 class="oferta-nombre">{{ oferta.nombre }}</h3>
                <div class="oferta-rating">
                  <span class="rating-stars">â­</span>
                  <span class="rating-value">{{ oferta.rating }}</span>
                </div>
              </div>

              <p class="oferta-descripcion">{{ oferta.descripcionCorta }}</p>

              <div class="oferta-artesano">
                <span class="artesano-icon">ğŸ‘¨â€ğŸ¨</span>
                <span class="artesano-nombre">{{ oferta.artesano }}</span>
                <span class="artesano-region">Â· {{ oferta.region }}</span>
              </div>

              <!-- Precios -->
              <div class="oferta-precios">
                <div class="precio-oferta">{{ calcularPrecioOferta(oferta) | currency }}</div>
                <div class="precio-original">{{ oferta.precio | currency }}</div>
                <div class="ahorro">Ahorras {{ calcularAhorro(oferta) | currency }}</div>
              </div>

              <!-- Stock y vendidos -->
              <div class="oferta-stats">
                <div class="stat">
                  <span class="stat-icon">ğŸ“¦</span>
                  <span class="stat-text">{{ oferta.stock }} disponibles</span>
                </div>
                <div class="stat">
                  <span class="stat-icon">ğŸ›’</span>
                  <span class="stat-text">{{ oferta.vendidos }} vendidos</span>
                </div>
              </div>

              <!-- Barra de progreso de ventas -->
              <div *ngIf="oferta.vendidos > 0" class="ventas-progress">
                <div class="progress-bar" [style.width]="calcularProgresoVentas(oferta) + '%'"></div>
                <div class="progress-text">
                  {{ oferta.vendidos }} personas ya compraron
                </div>
              </div>

              <!-- Acciones -->
              <div class="oferta-actions">
                <button class="btn-comprar" 
                        (click)="comprarAhora(oferta)"
                        [disabled]="oferta.stock === 0">
                  âš¡ Comprar Ahora
                </button>
                <button class="btn-compartir" (click)="compartirOferta(oferta)">
                  ğŸ“¤ Compartir
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Sin resultados -->
        <div *ngIf="ofertasFiltradas.length === 0" class="sin-ofertas">
          <div class="sin-ofertas-content">
            <div class="sin-ofertas-icon">ğŸ·ï¸</div>
            <h3>No hay ofertas disponibles</h3>
            <p>Revisa mÃ¡s tarde o explora nuestros productos regulares</p>
            <button class="btn-explorar" routerLink="/marketplace">
              ğŸ¨ Explorar Productos
            </button>
          </div>
        </div>
      </section>

      <!-- SecciÃ³n de Ofertas Flash -->
      <section *ngIf="ofertasFlash.length > 0" class="ofertas-flash">
        <div class="flash-header">
          <h2>âš¡ Ofertas Flash</h2>
          <p>Descuentos por tiempo limitado - Â¡No te quedes sin ellos!</p>
          <div class="flash-timer">
            <span class="flash-timer-text">Termina en: {{ ofertasFlash[0].tiempoRestante?.horas }}h {{ ofertasFlash[0].tiempoRestante?.minutos }}m</span>
          </div>
        </div>
        
        <div class="flash-grid">
          <div *ngFor="let oferta of ofertasFlash" class="flash-card">
            <div class="flash-badge">FLASH</div>
            <div class="flash-imagen">
              <img [src]="oferta.imagen" [alt]="oferta.nombre">
            </div>
            <div class="flash-info">
              <h4>{{ oferta.nombre }}</h4>
              <div class="flash-precio">
                <span class="precio-actual">{{ calcularPrecioOferta(oferta) | currency }}</span>
                <span class="precio-original">{{ oferta.precio | currency }}</span>
              </div>
              <button class="btn-flash" (click)="comprarAhora(oferta)">
                ğŸ¯ Obtener Oferta
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Newsletter Ofertas -->
      <section class="newsletter-ofertas">
        <div class="newsletter-content">
          <div class="newsletter-text">
            <h3>ğŸ’Œ No te pierdas ninguna oferta</h3>
            <p>SuscrÃ­bete y recibe las mejores ofertas de artesanÃ­as mexicanas directamente en tu email</p>
          </div>
          <div class="newsletter-form">
            <input type="email" placeholder="tu@email.com" class="newsletter-input">
            <button class="btn-newsletter">Suscribirme</button>
          </div>
        </div>
      </section>
    </div>
  </main>
</div>