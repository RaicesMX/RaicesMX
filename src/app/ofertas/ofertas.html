<div class="ofertas-container">
  <!-- HERO SECTION -->
  <section class="ofertas-hero">
    <div class="mexican-pattern"></div>
    
    <div class="hero-content-wrapper">
      <div class="hero-content">
        <div class="hero-text">
          <h1 class="hero-title">
            <span class="hero-line-1">Descuentos</span>
            <span class="hero-line-2">
              <span class="text-especiales">Especiales</span>
              <span class="text-ofertas">Ofertas</span>
            </span>
          </h1>
          
          <p class="hero-subtitle">
            Aprovecha nuestras mejores ofertas en artesanÃ­as mexicanas. Â¡Tiempo limitado!
          </p>
          
          <div class="hero-stats">
            <div class="hero-stat">
              <span class="stat-number">{{ obtenerTotalOfertas() }}</span>
              <span class="stat-label">Ofertas</span>
            </div>
            <div class="hero-stat">
              <span class="stat-number">{{ obtenerOfertasActivas() }}</span>
              <span class="stat-label">Activas</span>
            </div>
            <div class="hero-stat">
              <span class="stat-number">{{ calcularAhorroTotal() | currency:'MXN':'symbol' }}</span>
              <span class="stat-label">Ahorro Total</span>
            </div>
          </div>
          
          <div class="hero-cta">
            <button class="btn-explorar" (click)="scrollToOfertas()">
              <span class="btn-icon">ğŸ”¥</span>
              <span class="btn-text">Ver Ofertas</span>
            </button>
          </div>
        </div>
        
        <div class="hero-decoration">
        <div class="decoration-item">ğŸº</div> <!-- CerÃ¡mica -->
        <div class="decoration-item">ğŸ§µ</div> <!-- Textil -->
        <div class="decoration-item">ğŸ¨</div> <!-- Arte -->
        </div>
      </div>
    </div>
    
    <div class="scroll-indicator" (click)="scrollToOfertas()">
      <div class="arrow"></div>
    </div>
  </section>

  <!-- FILTROS RÃPIDOS -->
  <section class="filtros-section">
    <div class="container">
      <div class="filtros-grid">
        <!-- Filtros rÃ¡pidos -->
        <div class="filtro-card" 
            [class.active]="filtroRapido === 'todas'"
            (click)="aplicarFiltroRapido('todas')">
          <div class="filtro-icon">ğŸ¯</div>
          <div class="filtro-content">
            <h4>Todas</h4>
            <p>Todas las ofertas</p>
          </div>
        </div>
        
        <div class="filtro-card" 
            [class.active]="filtroRapido === 'destacadas'"
            (click)="aplicarFiltroRapido('destacadas')">
          <div class="filtro-icon">ğŸ†</div> <!-- Trofeo en lugar de fuego -->
          <div class="filtro-content">
            <h4>Destacadas</h4>
            <p>Ofertas especiales</p>
          </div>
        </div>
        
        <div class="filtro-card"
            [class.active]="filtroRapido === 'exclusivas'"
            (click)="aplicarFiltroRapido('exclusivas')">
          <div class="filtro-icon">â­</div>
          <div class="filtro-content">
            <h4>Exclusivas</h4>
            <p>Solo en RaÃ­cesMX</p>
          </div>
        </div>
        
        <!-- Dropdown de categorÃ­as -->
        <div class="filtro-card dropdown-filtro">
          <div class="filtro-icon">ğŸº</div>
          <div class="filtro-content">
            <select [(ngModel)]="filtroCategoria" (change)="filtrarOfertas()" class="categoria-select">
              <option value="">Todas las categorÃ­as</option>
              <option *ngFor="let categoria of categoriasUnicas" [value]="categoria">
                {{ categoria }}
              </option>
            </select>
          </div>
        </div>
      </div>
      
      <!-- Controles adicionales -->
      <div class="filtros-footer">
        <div class="ordenamiento">
          <label for="ordenSelect">Ordenar por:</label>
            <select id="ordenSelect" [(ngModel)]="ordenSeleccionado" (change)="ordenarOfertas()" class="orden-select">
            <option value="descuento">Mayor descuento</option>
            <option value="precio">Menor precio</option>
            <option value="popular">MÃ¡s populares</option>
            <option value="nuevo">MÃ¡s recientes</option>
          </select>
        </div>
        
        <button class="btn-filtros-avanzados" (click)="mostrarFiltrosAvanzados = !mostrarFiltrosAvanzados">
          {{ mostrarFiltrosAvanzados ? 'Menos filtros' : 'MÃ¡s filtros' }}
        </button>
        
        <button class="btn-limpiar" (click)="limpiarFiltros()" *ngIf="filtroActivo">
          ğŸ—‘ï¸ Limpiar filtros
        </button>
      </div>
      
      <!-- Filtros avanzados -->
      <div class="filtros-avanzados" *ngIf="mostrarFiltrosAvanzados">
        <div class="filtro-avanzado">
          <div role="group" aria-labelledby="descuentoLabel">
              <div id="descuentoLabel" class="sr-only">Descuento mÃ­nimo</div>
              <div class="descuento-options">
        <button *ngFor="let desc of ['10', '20', '30', '40', '50']"
                class="descuento-btn"
                [class.active]="filtroDescuento === desc"
                (click)="filtroDescuento = filtroDescuento === desc ? '' : desc; filtrarOfertas()"
                type="button">
            {{ desc }}%+
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- SECCIÃ“N DE OFERTAS -->
  <section class="ofertas-section" id="ofertas" #ofertasSection>
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Nuestras Ofertas</h2>
        <div class="resultados-count">
          <span class="count-number">{{ ofertasFiltradas.length }}</span>
          <span class="count-text">
            {{ ofertasFiltradas.length === 1 ? 'oferta' : 'ofertas' }}
          </span>
        </div>
      </div>
      
      <!-- Estado de carga -->
      <div class="loading-state" *ngIf="cargando">
        <div class="spinner"></div>
        <p>Cargando ofertas...</p>
      </div>
      
      <!-- Grid de ofertas -->
      <div class="ofertas-grid" *ngIf="!cargando">
        <div class="oferta-card" *ngFor="let oferta of ofertasFiltradas">
          
          <!-- Imagen con fallback -->
          <div class="oferta-imagen">
            <img 
              [src]="oferta.imagen" 
              [alt]="oferta.nombre"
              (error)="onImgError($event, oferta)"
              (load)="onImgLoad(oferta)"
              loading="lazy"
            />
            
            <!-- Badges -->
            <div class="oferta-badges">
              <span class="badge badge-descuento">-{{ oferta.descuento }}%</span>
              <span class="badge badge-destacada" *ngIf="oferta.destacada">ğŸ”¥ Destacada</span>
              <span class="badge badge-exclusiva" *ngIf="oferta.exclusivo">â­ Exclusiva</span>
              <span class="badge badge-agotado" *ngIf="oferta.stock === 0">ğŸ˜” Agotado</span>
              <span class="badge badge-stock" *ngIf="oferta.stock <= 5 && oferta.stock > 0">â³ Ãšltimas {{ oferta.stock }}</span>
            </div>
            
            <!-- Timer -->
            <div class="oferta-timer" *ngIf="oferta.tiempoRestante && oferta.stock > 0">
              <div class="timer-progress">
                <div class="progress-bar" [style.width]="calcularProgresoTiempo(oferta) + '%'"></div>
              </div>
              <div class="timer-text">
                â° {{ oferta.tiempoRestante.dias }}d {{ oferta.tiempoRestante.horas }}h
              </div>
            </div>
          </div>
          
          <!-- Contenido -->
          <div class="oferta-content">
            <h3 class="oferta-nombre">{{ oferta.nombre }}</h3>
            
            <p class="oferta-descripcion">{{ oferta.descripcionCorta }}</p>
            
            <!-- Artesano y regiÃ³n -->
            <div class="oferta-artesano">
              <span class="artesano-icon">ğŸ‘¨â€ğŸ¨</span>
              <span class="artesano-nombre">{{ oferta.artesano }}</span>
              <span class="artesano-region">Â· {{ oferta.region }}</span>
            </div>
            
            <!-- Stats -->
            <div class="oferta-stats">
              <div class="stat">
                <span class="stat-icon">â­</span>
                <span class="stat-value">{{ oferta.rating }}</span>
                <span class="stat-label">Rating</span>
              </div>
              <div class="stat">
                <span class="stat-icon">ğŸ“¦</span>
                <span class="stat-value">{{ oferta.stock }}</span>
                <span class="stat-label">Stock</span>
              </div>
              <div class="stat">
                <span class="stat-icon">ğŸ›’</span>
                <span class="stat-value">{{ oferta.vendidos }}</span>
                <span class="stat-label">Vendidos</span>
              </div>
            </div>
            
            <!-- Precios -->
            <div class="oferta-precios">
              <div class="precio-oferta">
                {{ calcularPrecioOferta(oferta) | currency:'MXN':'symbol' }}
              </div>
              <div class="precio-original">
                {{ oferta.precio | currency:'MXN':'symbol' }}
              </div>
              <div class="ahorro">
                Ahorras {{ calcularAhorro(oferta) | currency:'MXN':'symbol' }}
              </div>
            </div>
            
            <!-- Acciones -->
            <div class="oferta-actions">
              <button class="btn-agregar-carrito" 
                      (click)="agregarAlCarrito(oferta)"
                      [disabled]="oferta.stock === 0">
                <span *ngIf="oferta.stock > 0">ğŸ›’ Agregar</span>
                <span *ngIf="oferta.stock === 0">ğŸ˜” Agotado</span>
              </button>
              
              <button class="btn-comprar-ahora" 
                      (click)="comprarAhora(oferta)"
                      [disabled]="oferta.stock === 0">
                <span *ngIf="oferta.stock > 0">âš¡ Comprar</span>
                <span *ngIf="oferta.stock === 0">No disponible</span>
              </button>
              
              <button class="btn-favorito" (click)="toggleFavorito(oferta)">
                {{ oferta.enFavoritos ? 'â¤ï¸' : 'ğŸ¤' }}
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Sin resultados -->
      <div class="no-resultados" *ngIf="!cargando && ofertasFiltradas.length === 0">
        <div class="no-resultados-icon">ğŸ”</div>
        <h3>No encontramos ofertas</h3>
        <p>Prueba con otros filtros o revisa mÃ¡s tarde</p>
        <button class="btn-limpiar" (click)="limpiarFiltros()">
          Ver todas las ofertas
        </button>
      </div>
    </div>
  </section>

  <!-- INFORMACIÃ“N ADICIONAL -->
  <section class="info-section">
    <div class="container">
      <h2 class="info-title">Â¿CÃ³mo funcionan nuestras ofertas?</h2>
      <div class="info-grid">
        <div class="info-card">
          <div class="info-icon">â°</div>
          <h3>Tiempo Limitado</h3>
          <p>Cada oferta tiene una duraciÃ³n especÃ­fica</p>
        </div>
        <div class="info-card">
          <div class="info-icon">ğŸ†</div>
          <h3>Calidad Garantizada</h3>
          <p>Misma calidad que nuestros productos regulares</p>
        </div>
        <div class="info-card">
          <div class="info-icon">ğŸ“¦</div>
          <h3>EnvÃ­o Gratis</h3>
          <p>En ofertas especiales sobre $500 MXN</p>
        </div>
      </div>
    </div>
  </section>
</div>