<div class="carrito-container">
<!-- Header (mismo que perfil) -->
    <header class="header-marketplace">
    <div class="header-content">
        <div class="header-left">
            <img src="assets/images/Logo_RMX.png" alt="Ra√≠cesMX" class="logo-header">
            <span class="logo-text">Ra√≠cesMX</span>
            <span class="separator">|</span>
            <span class="header-desc">Artesan√≠as Mexicanas Aut√©nticas</span>
        </div>
    <div class="header-center">
        <input type="text" placeholder="Buscar productos..." class="search-input">
        <button class="btn-search">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="white" viewBox="0 0 16 16">
                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
            </svg>
        </button>
    </div>
    <nav class="header-right">
        <a class="nav-link" routerLink="/marketplace">Inicio</a>
        <a class="nav-link" routerLink="/categorias">Categor√≠as</a>
        <a class="nav-link" routerLink="/ofertas">Ofertas</a>
        <a class="nav-link" routerLink="/ayuda">Ayuda</a>
        <a class="nav-link" routerLink="/favoritos">Favoritos</a>
        <a class="nav-link cart-link active" routerLink="/carrito">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l.84 4.479 9.144-.459L13.89 4H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
            </svg>
            <span class="cart-badge">{{ obtenerTotalItems() }}</span>
        </a>
        <a class="nav-link" routerLink="/perfil">Perfil</a>
        </nav>
    </div>
</header>

<!-- Contenido principal del carrito -->
<main class="carrito-main">
    <div class="carrito-content">
<!-- Header del carrito -->
    <section class="carrito-header">
        <div class="header-info">
            <h1>Tu Carrito de Compras üõí</h1>
                <p>Revisa tus productos artesanales antes de finalizar tu compra</p>
        </div>
        <div class="carrito-stats">
            <div class="stat">
                <span class="numero">{{ obtenerTotalItems() }}</span>
                <span class="label">Productos</span>
        </div>
            <div class="stat">
                <span class="numero">{{ carrito.length }}</span>
                <span class="label">Art√≠culos</span>
            </div>
        </div>
    </section>

    <div class="carrito-layout">
        <!-- Lista de productos -->
        <div class="productos-section">
            <div class="section-header">
            <h2>Productos en el carrito</h2>
            <button class="btn-vaciar" (click)="vaciarCarrito()" *ngIf="carrito.length > 0">
                üóëÔ∏è Vaciar Carrito
            </button>
        </div>

<!-- Carrito vac√≠o -->
          <div *ngIf="carrito.length === 0" class="carrito-vacio">
            <div class="vacio-content">
                <div class="vacio-icon">üõí</div>
                <h3>Tu carrito est√° vac√≠o</h3>
                <p>Agrega algunos productos artesanales para comenzar</p>
                <button class="btn-primary" routerLink="/marketplace">
                    Explorar Productos
                </button>
            </div>
        </div>

<!-- Lista de productos -->
          <div *ngIf="carrito.length > 0" class="productos-list">
            <div *ngFor="let item of carrito; let i = index" class="producto-card">
                <div class="producto-imagen">
                    <img [src]="item.imagen" [alt]="item.nombre">
                </div>
            <div class="producto-info">
                <h3>{{ item.nombre }}</h3>
                <p class="producto-desc">{{ item.descripcion }}</p>
                <div class="producto-meta">
                    <span class="categoria">{{ item.categoria }}</span>
                    <span class="artesano">Por: {{ item.artesano }}</span>
                </div>
            </div>

            <div class="producto-precio">
                <span class="precio">${{ item.precio * item.cantidad | number:'1.2-2' }}</span>
                <span class="precio-unitario">${{ item.precio | number:'1.2-2' }} c/u</span>
            </div>

            <div class="producto-cantidad">
                <div class="cantidad-controls">
                    <button class="btn-cantidad" (click)="disminuirCantidad(i)" [disabled]="item.cantidad <= 1">
                    ‚àí
                </button>
                    <span class="cantidad">{{ item.cantidad }}</span>
                    <button class="btn-cantidad" (click)="aumentarCantidad(i)">
                        +
                </button>
                </div>
                <button class="btn-eliminar" (click)="eliminarProducto(i)">
                    üóëÔ∏è
                </button>
            </div>
            </div>
        </div>
</div>

        <!-- Resumen del pedido -->
        <div *ngIf="carrito.length > 0" class="resumen-section">
            <div class="resumen-card">
                <h3>Resumen del Pedido</h3>
            
            <div class="resumen-linea">
                <span>Subtotal:</span>
                <span>${{ calcularSubtotal() | number:'1.2-2' }}</span>
            </div>
            
            <div class="resumen-linea">
                <span>Env√≠o:</span>
                <span>{{ calcularEnvio() === 0 ? 'Gratis' : '$' + (calcularEnvio() | number:'1.2-2') }}</span>
            </div>
            
            <div class="resumen-linea descuento">
                <span>Descuento:</span>
                <span>-${{ calcularDescuento() | number:'1.2-2' }}</span>
            </div>
            
            <div class="resumen-total">
                <span>Total:</span>
                <span>${{ calcularTotal() | number:'1.2-2' }}</span>
            </div>

            <div class="resumen-actions">
                <button class="btn-comprar" (click)="procederPago()">
                üõçÔ∏è Proceder al Pago
            </button>
            <button class="btn-seguir" routerLink="/marketplace">
                ‚Üê Seguir Comprando
                </button>
            </div>

            <!-- M√©todos de pago -->
            <div class="metodos-pago">
                <h4>M√©todos de pago aceptados:</h4>
                <div class="pago-icons">
                    <span>üí≥</span>
                    <span>üì±</span>
                    <span>üè¶</span>
                    <span>üí∞</span>
                </div>
            </div>
        </div>

    <!-- Cup√≥n de descuento -->
        <div class="cupon-card">
            <h4>¬øTienes un cup√≥n?</h4>
            <div class="cupon-input">
                <input type="text" placeholder="Ingresa c√≥digo" [(ngModel)]="codigoCupon" class="form-input">
                <button class="btn-cupon" (click)="aplicarCupon()">Aplicar</button>
            </div>
            <div *ngIf="cuponAplicado" class="cupon-success">
                ‚úÖ Cup√≥n aplicado correctamente
            </div>
                </div>
                </div>
            </div>
        </div>
    </main>
</div>