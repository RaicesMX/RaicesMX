<div class="carrito-container">
<!-- Contenido principal del carrito -->
<main class="carrito-main">
    <div class="carrito-content">
<!-- Header del carrito -->
    <section class="carrito-header">
        <div class="header-info">
            <h1>Tu Carrito de Compras üõí</h1>
                <p>Revisa tus productos artesanales antes de finalizar tu compra</p>
        </div>
        <div class="carrito-stats">
            <div class="stat">
                <span class="numero">{{ obtenerTotalItems() }}</span>
                <span class="label">Productos</span>
        </div>
            <div class="stat">
                <span class="numero">{{ carrito.length }}</span>
                <span class="label">Art√≠culos</span>
            </div>
        </div>
    </section>

    <div class="carrito-layout">
        <!-- Lista de productos -->
        <div class="productos-section">
            <div class="section-header">
            <h2>Productos en el carrito</h2>
            <button class="btn-vaciar" (click)="vaciarCarrito()" *ngIf="carrito.length > 0">
                üóëÔ∏è Vaciar Carrito
            </button>
        </div>

<!-- Carrito vac√≠o -->
          <div *ngIf="carrito.length === 0" class="carrito-vacio">
            <div class="vacio-content">
                <div class="vacio-icon">üõí</div>
                <h3>Tu carrito est√° vac√≠o</h3>
                <p>Agrega algunos productos artesanales para comenzar</p>
                <button class="btn-primary" routerLink="/marketplace">
                    Explorar Productos
                </button>
            </div>
        </div>

<!-- Lista de productos -->
          <div *ngIf="carrito.length > 0" class="productos-list">
            <div *ngFor="let item of carrito; let i = index" class="producto-card">
                <div class="producto-imagen">
                    <img [src]="item.imagen" [alt]="item.nombre">
                </div>
            <div class="producto-info">
                <h3>{{ item.nombre }}</h3>
                <p class="producto-desc">{{ item.descripcion }}</p>
                <div class="producto-meta">
                    <span class="categoria">{{ item.categoria }}</span>
                    <span class="artesano">Por: {{ item.artesano }}</span>
                </div>
            </div>

            <div class="producto-precio">
                <span class="precio">${{ item.precio * item.cantidad | number:'1.2-2' }}</span>
                <span class="precio-unitario">${{ item.precio | number:'1.2-2' }} c/u</span>
            </div>

            <div class="producto-cantidad">
                <div class="cantidad-controls">
                    <button class="btn-cantidad" (click)="disminuirCantidad(i)" [disabled]="item.cantidad <= 1">
                    ‚àí
                </button>
                    <span class="cantidad">{{ item.cantidad }}</span>
                    <button class="btn-cantidad" (click)="aumentarCantidad(i)">
                        +
                </button>
                </div>
                <button class="btn-eliminar" (click)="eliminarProducto(i)">
                    üóëÔ∏è
                </button>
            </div>
            </div>
        </div>
</div>

        <!-- Resumen del pedido -->
        <div *ngIf="carrito.length > 0" class="resumen-section">
            <div class="resumen-card">
                <h3>Resumen del Pedido</h3>
            
            <div class="resumen-linea">
                <span>Subtotal:</span>
                <span>${{ calcularSubtotal() | number:'1.2-2' }}</span>
            </div>
            
            <div class="resumen-linea">
                <span>Env√≠o:</span>
                <span>{{ calcularEnvio() === 0 ? 'Gratis' : '$' + (calcularEnvio() | number:'1.2-2') }}</span>
            </div>
            
            <div class="resumen-linea descuento">
                <span>Descuento:</span>
                <span>-${{ calcularDescuento() | number:'1.2-2' }}</span>
            </div>
            
            <div class="resumen-total">
                <span>Total:</span>
                <span>${{ calcularTotal() | number:'1.2-2' }}</span>
            </div>

            <div class="resumen-actions">
                <button class="btn-comprar" (click)="procederPago()">
                üõçÔ∏è Proceder al Pago
            </button>
            <button class="btn-seguir" routerLink="/marketplace">
                ‚Üê Seguir Comprando
                </button>
            </div>

            <!-- M√©todos de pago -->
            <div class="metodos-pago">
                <h4>M√©todos de pago aceptados:</h4>
                <div class="pago-icons">
                    <span>üí≥</span>
                    <span>üì±</span>
                    <span>üè¶</span>
                    <span>üí∞</span>
                </div>
            </div>
        </div>

    <!-- Cup√≥n de descuento -->
        <div class="cupon-card">
            <h4>¬øTienes un cup√≥n?</h4>
            <div class="cupon-input">
                <input type="text" placeholder="Ingresa c√≥digo" [(ngModel)]="codigoCupon" class="form-input">
                <button class="btn-cupon" (click)="aplicarCupon()">Aplicar</button>
            </div>
            <div *ngIf="cuponAplicado" class="cupon-success">
                ‚úÖ Cup√≥n aplicado correctamente
            </div>
                </div>
                </div>
            </div>
        </div>
    </main>
</div>